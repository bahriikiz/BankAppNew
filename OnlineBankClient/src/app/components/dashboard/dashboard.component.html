<div class="container py-4">
  
  <div class="row align-items-center mb-5">
    <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
      <h2 class="fw-bold text-dark mb-1">Hesaplarım</h2>
      <p class="text-muted mb-0">Tüm banka varlıklarınız tek bir ekranda.</p>
    </div>
    
    <div class="col-md-6 text-md-end d-flex gap-2 justify-content-center justify-content-md-end">
      <button class="btn btn-outline-dark rounded-pill px-4 shadow-sm" 
              (click)="addOtherBankAccount()" 
              [disabled]="isSyncing()">
        @if (isSyncing()) { <span class="spinner-border spinner-border-sm me-2"></span> }
        <i class="bi bi-bank me-1"></i> Farklı Banka Ekle
      </button>

      <button class="btn text-white rounded-pill px-4 shadow-sm border-0" 
              style="background-color: #ac3900;"
              routerLink="/create-account">
        <i class="bi bi-plus-lg me-1"></i> Yeni Hesap Aç
      </button>
    </div>
  </div>

  @if (isLoading()) {
    <div class="text-center py-5">
      <output class="spinner-border" style="color: #ac3900;"></output>
      <p class="mt-3 text-muted">Varlıklarınız listeleniyor...</p>
    </div>
  } @else {
    
    <div class="row g-4">
      @for (acc of accounts(); track acc.id) {
        <div class="col-md-6 col-lg-4">
          
          <div class="card h-100 border-0 shadow-sm rounded-4 account-card"
               [ngClass]="acc.providerBank === 'Vakıfbank' ? 'bg-vakif' : 'bg-ikiz'">
            
            <div class="card-body p-4 text-white">
              
              <div class="d-flex justify-content-between mb-4">
                <span class="badge rounded-pill bg-white bg-opacity-25 px-3 py-2">
                  {{ acc.providerBank || 'İKİZ BANK' }}
                </span>
                <i class="bi bi-shield-check fs-4"></i>
              </div>

              <div class="mb-4">
                <small class="opacity-75 d-block mb-1 text-uppercase">{{ acc.accountName }}</small>
                <h3 class="fw-bold mb-0">
                  {{ acc.balance | number:'1.2-2' }} <span class="fs-5 fw-light">{{ acc.currency }}</span>
                </h3>
              </div>

              <div class="iban-box rounded-3 p-2 mb-3 bg-black bg-opacity-10">
                <small class="font-monospace">TR {{ acc.iban }}</small>
              </div>

              <div class="d-flex justify-content-between align-items-center">
                <small class="opacity-75">No: {{ acc.accountNumber }}</small>
                <button class="btn btn-sm btn-light rounded-pill px-3 fw-medium">Detay</button>
              </div>
              
            </div>
          </div>
        </div>
      }

      @if (accounts().length === 0) {
        <div class="col-12 text-center py-5 border border-dashed rounded-4 bg-light">
          <i class="bi bi-wallet2 display-3 text-muted opacity-25"></i>
          <h5 class="mt-3 fw-bold">Henüz tanımlı bir hesabınız yok.</h5>
          <p class="text-muted">İKİZ BANK veya Vakıfbank hesaplarınızı ekleyerek dijital bankacılığa başlayın.</p>
        </div>
      }
    </div>
    
  }
</div>